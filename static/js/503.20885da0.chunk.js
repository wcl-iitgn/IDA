"use strict";(self.webpackChunkdrought_atlas=self.webpackChunkdrought_atlas||[]).push([[503],{1060:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var n=t(2791),r=t(8286),s=t(4032),o=t(4086),i=t(6161),l=t(5e3),d=t(5125),m=t(6031),c=t.n(m),p=t(5180),h=t(6069);const g=t.p+"static/media/map-legend.12e049e854edf9562915.jpg";var x=t(184);const u=e=>{let{mapContainerRef:a}=e;const{setAlertMessage:t,setShowAlert:n}=(0,p.o)();return(0,x.jsx)("button",{onClick:()=>{const e=a.current,r=window.innerWidth,s=new Image;s.src=h,t("Plot is downloading.."),n(!0);const o={width:2*e.offsetWidth,height:2*e.offsetHeight,style:{transform:"scale(2)",transformOrigin:"top left",width:"100%",height:"auto"}};c().toBlob(e,o).then((e=>{const a=new FileReader;a.onloadend=()=>{const e=new Image;e.onload=()=>{const a=e.width/e.height,o=r<=767?"portrait":"landscape",i=new d.ZP(o,"px","a4");i.addImage(s,"PNG",10,6,150,33.333);const l=i.internal.pageSize.getWidth()-200-10;if(i.addImage(g,"JPEG",l,10,200,44.444),r<=767){const t=i.internal.pageSize.getHeight()-100,n=t*a,r=(i.internal.pageSize.getWidth()-n)/2,s=(i.internal.pageSize.getHeight()-t)/2+20;i.addImage(e,"PNG",r,s,n,t)}else{const t=i.internal.pageSize.getWidth()-15,n=t/a,r=0,s=(i.internal.pageSize.getHeight()-n)/2;i.addImage(e,"PNG",r,s,t,n)}const m="This plot has been downloaded from DROUGHT ATLAS OF INDIA (www.indiadroughtatlas.in)",c=8*i.getStringUnitWidth(m)/i.internal.scaleFactor,p=(i.internal.pageSize.getWidth()-c)/2,h=i.internal.pageSize.getHeight()-10;i.setFontSize(8),i.text(p,h,m);i.save("timeseries.pdf",{compress:!0,quality:.3}),t("Plot has been exported as PDF successfully!"),n(!0)},e.src=a.result},a.readAsDataURL(e)})).catch((e=>{t("Error exporting plot image:",e),n(!0)}))},className:"print_timesiries_btn",children:"Export Time Series"})},y=()=>{const e=(0,n.useRef)(null),[a,t]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[c,p]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[y,S]=(0,n.useState)([]),[b,f]=(0,n.useState)([]),[j,w]=(0,n.useState)([]),[N,I]=(0,n.useState)(null),[_,k]=(0,n.useState)(null),[T,D]=(0,n.useState)(null),Y=N&&N.length>0?Object.entries(N[0]).filter((e=>{let[t,n]=e;return"ID"!==t&&parseInt(t)>=a&&parseInt(t)<=d})).map((e=>{let[a,t]=e;return{Year:parseInt(a),DroughtValue:parseFloat(t)}})):[];(0,n.useEffect)((()=>{(async()=>{try{g(!0);const e=await fetch("https://wcl-iitgn.github.io/india-drought-atlas-data/Area.json"),a=await e.json(),t=await fetch("https://wcl-iitgn.github.io/india-drought-atlas-data/Intensity.json"),n=await t.json();k(a),D(n),g(!1)}catch(e){console.error("Error fetching and filtering wind data:",e)}})()}),[]),(0,n.useEffect)((()=>{if(c&&a&&d&&j){(async()=>{try{g(!0);const e=c.replace(/\s+/g,"_"),a=await fetch("https://wcl-iitgn.github.io/india-drought-atlas-data/".concat(e,".json")),t=(await a.json()).filter((e=>e.ID===j[0].ID.toString()));I(t),g(!1)}catch(e){console.error("Error fetching and filtering wind data:",e)}})()}}),[c,a,d,j]);const v=(e,a)=>{p(a)};return(0,x.jsx)("div",{className:"dasboard_page_container",children:(0,x.jsxs)("div",{className:"main_dashboard",children:[(0,x.jsxs)("div",{className:"left_panel",children:[(0,x.jsxs)("div",{className:"border border-secondary p-2 mb-2",children:[(0,x.jsx)(o.Z,{style:{marginBottom:"10px"},onChange:(e,a)=>((e,a)=>{let t=l.filter((e=>e.STATE===a));t=[...new Set(t.map((e=>e)))],t.sort(),S(t)})(0,a),id:"state",getOptionLabel:e=>"".concat(e),options:[...new Set(l.map((e=>e.STATE)))],isOptionEqualToValue:(e,a)=>e.Name===a.Name,noOptionsText:"No Available Data",renderOption:(e,a)=>(0,n.createElement)(s.Z,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,x.jsx)(i.Z,{...e,label:"Search State"})}),(0,x.jsx)(o.Z,{style:{marginBottom:"10px"},onChange:(e,a)=>((e,a)=>{let t=y.filter((e=>e.DISTRICT===a));t=[...new Set(t.map((e=>e)))],t.sort(),f(t)})(0,a),id:"district",getOptionLabel:e=>"".concat(e),options:[...new Set(y.map((e=>e.DISTRICT)))],isOptionEqualToValue:(e,a)=>e.Name===a.Name,noOptionsText:"No Available Data",disabled:0===y.length,renderOption:(e,a)=>(0,n.createElement)(s.Z,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,x.jsx)(i.Z,{...e,label:"Search District"})}),(0,x.jsx)(o.Z,{style:{marginBottom:"10px"},onChange:(e,a)=>((e,a)=>{let t=b.filter((e=>e.TEHSIL===a));w(t)})(0,a),id:"tehsil",disabled:0===b.length,getOptionLabel:e=>"".concat(e),options:[...new Set(b.map((e=>e.TEHSIL)))],isOptionEqualToValue:(e,a)=>e.Name===a.Name,noOptionsText:"No Available Data",renderOption:(e,a)=>(0,n.createElement)(s.Z,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,x.jsx)(i.Z,{...e,label:"Search Tehsil"})})]}),(0,x.jsxs)("div",{className:"border border-secondary p-2 mb-2",children:[(0,x.jsx)(o.Z,{style:{marginBottom:"10px"},onChange:(e,a)=>((e,a)=>{t(a)})(0,a),id:"startyear",disabled:0===j.length,options:Array.from({length:120},((e,a)=>"".concat(1901+a))),noOptionsText:"No Available Data",renderOption:(e,a)=>(0,n.createElement)(s.Z,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,x.jsx)(i.Z,{...e,label:"Select Start Year",className:"form-select","aria-label":"Default select example",value:a})}),(0,x.jsx)(o.Z,{disabled:0===j.length,style:{marginBottom:"10px"},onChange:(e,a)=>((e,a)=>{m(a)})(0,a),id:"endyear",options:Array.from({length:120},((e,a)=>"".concat(1901+a))),noOptionsText:"No Available Data",renderOption:(e,a)=>(0,n.createElement)(s.Z,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,x.jsx)(i.Z,{...e,label:"Select End Year",className:"form-select","aria-label":"Default select example",value:d})})]}),(0,x.jsxs)("div",{className:"border border-secondary p-2 mb-2",children:[(0,x.jsx)(o.Z,{onChange:v,id:"session",options:["Summer Monsoon","Winter Monsoon","Calendar Year","Water Year"],renderInput:e=>(0,x.jsx)(i.Z,{...e,className:"form-select mb-3",label:"Select Season"})}),(0,x.jsx)("label",{className:"form-label",children:"Or"}),(0,x.jsx)("br",{}),(0,x.jsx)(o.Z,{onChange:v,id:"month",options:["January","February","March","April","May","June","July","August","September","October","November","December"],renderInput:e=>(0,x.jsx)(i.Z,{...e,className:"form-select mb-3",label:"Select Month"})})]}),Y&&Y.length>0&&c&&(0,x.jsx)(u,{mapContainerRef:e})]}),(0,x.jsxs)("div",{className:"right_panel",ref:e,children:[Y&&Y.length>0&&c&&(0,x.jsxs)(x.Fragment,{children:[j&&j.length>0&&(0,x.jsxs)("div",{className:"timeseries_heading",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("b",{children:"Region: "}),j[0].TEHSIL,", ",j[0].DISTRICT,", ",j[0].STATE," "]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("b",{children:"Season/Month: "}),c]})]}),(0,x.jsx)(r.Z,{data:[{x:Y.map((e=>e.Year)),y:Y.map((e=>e.DroughtValue)),type:"scatter",mode:"lines+markers",marker:{color:"red"}}],layout:{xaxis:{title:"Year"},yaxis:{title:"SPEI (Standardized Precipitation Evapotranspiration Index)"}},style:{width:"100%",height:"calc(100% - 100px)"}})]}),_&&T&&0===Y.length&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.Z,{data:[{x:_.map((e=>e.Year)),y:_.map((e=>e.Summer_Monsoon)),type:"scatter",mode:"lines+markers",marker:{color:"red"},name:"Summer Monsoon"},{x:_.map((e=>e.Year)),y:_.map((e=>e.Winter_Monsoon)),type:"scatter",mode:"lines+markers",marker:{color:"blue"},name:"Winter Monsoon"},{x:_.map((e=>e.Year)),y:_.map((e=>e.Calendar_Year)),type:"scatter",mode:"lines+markers",marker:{color:"green"},name:"Calendar Year"},{x:_.map((e=>e.Year)),y:_.map((e=>e.Water_Year)),type:"scatter",mode:"lines+markers",marker:{color:"purple"},name:"Water Year"}],layout:{title:"Drought Area",xaxis:{title:"Year"},yaxis:{title:"Drought Area (Mkm2)"},legend:{orientation:"h",x:.5,y:1.1}},style:{width:"100%",height:"100%"}}),(0,x.jsx)(r.Z,{data:[{x:T.map((e=>e.Year)),y:T.map((e=>e.Summer_Monsoon)),type:"scatter",mode:"lines+markers",marker:{color:"red"},name:"Summer Monsoon"},{x:T.map((e=>e.Year)),y:T.map((e=>e.Winter_Monsoon)),type:"scatter",mode:"lines+markers",marker:{color:"blue"},name:"Winter Monsoon"},{x:T.map((e=>e.Year)),y:T.map((e=>e.Calendar_Year)),type:"scatter",mode:"lines+markers",marker:{color:"green"},name:"Calendar Year"},{x:T.map((e=>e.Year)),y:T.map((e=>e.Water_Year)),type:"scatter",mode:"lines+markers",marker:{color:"purple"},name:"Water Year"}],layout:{title:"Mean Drought Intensity",xaxis:{title:"Year"},yaxis:{title:"Mean Drought Intensity"},legend:{orientation:"h",x:.5,y:1.1}},style:{width:"100%",height:"100%"}})]}),h&&(0,x.jsx)("div",{className:"map_layer_loader_container_desktop",children:(0,x.jsx)("div",{className:"map_loader_container",children:(0,x.jsx)("span",{className:"map_loader"})})})]}),h&&(0,x.jsx)("div",{className:"map_layer_loader_container_mobile",children:(0,x.jsx)("div",{className:"map_loader_container",children:(0,x.jsx)("span",{className:"map_loader"})})})]})})}}}]);
//# sourceMappingURL=503.20885da0.chunk.js.map